# 声音和事件

在本节中，我们将开发事件系统，这些事件稍后将用于添加音效。简而言之，我们希望在以下情况下播放声音：

1. 当玩家撞到墙壁或障碍物时 - 让他们知道他们无法通过
2. 当玩家将方块放在正确的位置时 - 表示"你做对了"
3. 当玩家将方块放在错误的位置时 - 表示这个移动是错误的

实际播放音频并不会太困难，因为 ggez 提供了这个功能，但我们现在最大的问题是我们需要确定*何时*播放声音。

让我们以方块放在正确位置的例子为例。我们可能可以使用我们的游戏状态系统，遍历方块和目标点，确定我们何时处于这种状态并播放声音。但这行不通，因为我们每秒会迭代多次，只要方块不移动，我们就一直处于这种状态，所以我们每秒都会尝试播放多次，这不是我们想要的。我们可以尝试保持一些状态来知道我们当前正在播放什么，但这感觉不对。问题是我们不能通过迭代检查状态来做到这一点，我们反而需要一个响应式模型，在这个模型中我们可以被告知某事刚刚发生，我们需要采取行动。我在这里描述的是一个事件模型，我们需要在方块被放置在目标点上时触发一个事件，然后当我们在另一端接收到这个事件时，我们需要播放声音。这样做的好处是我们可以将这个事件系统重复用于许多其他目的。
